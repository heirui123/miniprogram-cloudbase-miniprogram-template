# 微信支付配置检查清单

## 📋 配置进度跟踪

### ✅ 第一步：获取商户号信息
- [ ] 登录微信商户平台：https://pay.weixin.qq.com/
- [ ] 记录商户号（mchId）：`_________________`
- [ ] 记录商户密钥（mchKey）：`_________________`
- [ ] 确认商户号状态：正常/异常

### ✅ 第二步：下载API证书
- [ ] 进入：账户中心 → API安全 → API证书
- [ ] 下载 `apiclient_cert.p12` 文件
- [ ] 下载 `apiclient_key.pem` 文件
- [ ] 下载 `apiclient_cert.pem` 文件
- [ ] 确认证书文件完整性

### ✅ 第三步：配置云开发支付
- [ ] 登录云开发控制台：https://console.cloud.tencent.com/tcb
- [ ] 选择环境：`test-env`（cloud1-2g899deedcc43a17）
- [ ] 进入：设置 → 环境设置 → 微信支付
- [ ] 填入商户号：`_________________`
- [ ] 填入商户密钥：`_________________`
- [ ] 配置回调URL：`https://cloud1-2g899deedcc43a17-1317031037.tcloudbaseapp.com/paymentCallback`

### ✅ 第四步：上传证书文件
- [ ] 在云开发控制台找到"文件存储"
- [ ] 创建 `cert` 文件夹
- [ ] 上传 `apiclient_cert.p12` 到 `cert/` 目录
- [ ] 记录证书路径：`cert/apiclient_cert.p12`
- [ ] 在支付配置中填入证书路径

### ✅ 第五步：配置支付域名
- [ ] 登录微信商户平台
- [ ] 进入：产品中心 → 开发配置 → 支付回调
- [ ] 添加回调域名：`cloud1-2g899deedcc43a17-1317031037.tcloudbaseapp.com`
- [ ] 确认域名配置成功

### ✅ 第六步：配置小程序域名
- [ ] 登录微信公众平台
- [ ] 进入：开发 → 开发设置 → 服务器域名
- [ ] 在 `request` 合法域名中添加：`https://cloud1-2g899deedcc43a17-1317031037.tcloudbaseapp.com`
- [ ] 确认域名配置成功

### ✅ 第七步：测试配置
- [ ] 创建测试服务数据
- [ ] 创建测试订单
- [ ] 发起支付测试
- [ ] 验证支付流程
- [ ] 检查支付回调

## 🔧 配置参数记录

### 商户信息
```
商户号（mchId）：_________________
商户密钥（mchKey）：_________________
```

### 域名配置
```
回调域名：cloud1-2g899deedcc43a17-1317031037.tcloudbaseapp.com
证书路径：cert/apiclient_cert.p12
```

### 云开发环境
```
环境ID：cloud1-2g899deedcc43a17
环境别名：test-env
```

## 📝 配置日志

### 配置时间
- 开始时间：`_________________`
- 完成时间：`_________________`

### 遇到的问题
1. _________________
2. _________________
3. _________________

### 解决方案
1. _________________
2. _________________
3. _________________

## ✅ 最终验证

### 功能测试
- [ ] 订单创建功能正常
- [ ] 支付创建功能正常
- [ ] 支付流程正常
- [ ] 支付回调正常
- [ ] 订单状态更新正常

### 安全验证
- [ ] 证书文件安全存储
- [ ] 商户密钥未泄露
- [ ] 域名配置正确
- [ ] 权限设置合理

## 🎯 配置完成确认

- [ ] 所有配置步骤已完成
- [ ] 功能测试通过
- [ ] 安全验证通过
- [ ] 文档已更新
- [ ] 团队已通知

---

**配置人员**：`_________________`
**审核人员**：`_________________`
**完成日期**：`_________________` 