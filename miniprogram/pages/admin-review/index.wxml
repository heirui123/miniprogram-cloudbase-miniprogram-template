<view class="container">
  <view class="filter-bar">
    <text class="title">待审核服务</text>
  </view>

  <view class="list" wx:if="{{pendingList.length > 0}}">
    <view class="card" wx:for="{{pendingList}}" wx:key="_id">
      <view class="card-header">
        <text class="service-title">{{item.title}}</text>
        <text class="badge">{{item.category}}</text>
      </view>
      <view class="card-body">
        <text class="desc">{{item.description}}</text>
        <view class="meta">
          <text class="price"><text class="yen">¥</text>{{item.price}}</text>
          <text class="publisher">发布者：{{(item.publisher && item.publisher.nickName) ? item.publisher.nickName : '未知'}}</text>
          <text class="time">{{item.createTimeText}}</text>
        </view>
      </view>
      <view class="card-actions">
        <button class="btn btn-outline" data-id="{{item._id}}" bindtap="rejectService">拒绝</button>
        <button class="btn btn-primary" data-id="{{item._id}}" bindtap="approveService">通过</button>
      </view>
    </view>
  </view>

  <empty wx:else text="暂无待审核服务"></empty>

  <loading show="{{loading}}" text="加载中..."></loading>
</view>

<modal hidden="{{!showRejectModal}}" title="填写拒绝原因" show-cancel="{{true}}" bindconfirm="confirmReject" bindcancel="cancelReject">
  <textarea class="reason-input" placeholder="请输入拒绝原因（必填）" value="{{rejectReason}}" bindinput="onRejectReasonInput"></textarea>
</modal> 