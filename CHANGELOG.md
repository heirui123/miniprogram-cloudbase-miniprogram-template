# Changelog

## v0.3.0 (2025-08-10)

### 新增
- **接单下单功能完善**：
  - 完善订单创建流程，支持订单确认和状态管理
  - 新增微信支付功能，集成云开发支付API
  - 完善订单状态流转（待接单→进行中→已完成/已取消）
  - 添加订单统计功能，显示发布和接单数量
  - 支持订单类型筛选（全部/我发布的/我接的）
  - 完善订单详情页面，添加支付信息、时间线等
  - 新增支付回调云函数，处理支付结果通知
  - 完善权限控制，确保用户只能操作自己的订单

- **云函数功能扩展**：
  - 订单云函数新增：支付创建、支付确认、订单统计、权限验证
  - 新增支付回调云函数，处理微信支付回调
  - 完善订单状态流转逻辑和通知系统

- **用户界面优化**：
  - 订单列表页面添加统计卡片和筛选功能
  - 订单详情页面添加支付状态显示和操作按钮
  - 优化时间线显示，支持动态状态更新
  - 完善按钮权限控制，根据用户角色显示不同操作

- **测试环境建设**：
  - 新增支付功能测试指南，提供完整的测试方案
  - 创建支付测试工具类，支持自动化测试
  - 新增支付测试页面，提供可视化测试界面
  - 开发快速测试脚本，支持命令行测试
  - 完善测试环境部署指南，确保环境配置正确

### 修复
- 修复订单状态更新时的权限验证问题
- 优化订单列表的加载性能和分页逻辑
- 完善错误处理和用户提示信息

### 优化 / 其他
- 改进订单数据结构，支持更丰富的订单信息
- 优化支付流程，确保支付安全和数据一致性
- 完善通知系统，支持订单状态变更通知
- 改进用户体验，添加加载状态和操作反馈
- 建立完整的测试体系，提高代码质量和稳定性

## v0.2.1 (2025-08-10)

### 新增
- **服务详情页面完善**：
  - 添加图片预览功能，支持点击查看大图
  - 新增服务统计信息展示（浏览量、接单数、评价数、评分）
  - 完善发布者信息，显示服务数量和完成订单数
  - 添加评价统计模块，包含评分分布和平均评分
  - 支持评价筛选功能（按评分、有图评价等）
  - 新增评价点赞和回复功能
  - 添加相关推荐服务展示
  - 支持服务收藏功能
  - 优化时间显示格式（相对时间）

- **云函数功能扩展**：
  - 服务云函数新增：收藏/取消收藏、相关推荐、浏览记录、服务统计
  - 评价云函数新增：评价统计、回复评价、评价详情查询
  - 完善数据结构和权限验证

### 修复
- 修复服务详情页面样式兼容性问题
- 优化图片加载和显示效果
- 完善错误处理和用户提示

### 优化 / 其他
- 改进用户界面设计和交互体验
- 优化数据加载性能和缓存策略
- 完善代码注释和文档

## v0.2.0 (2025-08-10)

### 新增
- **评价系统完善**：
  - 完善评价云函数，添加参数验证、敏感词过滤、信用计算等功能
  - 优化评价页面，添加评分统计展示、点赞功能、筛选功能
  - 支持服务评价和订单评价两种模式
  - 添加用户信用等级计算和展示

- **跑腿代办功能完善**：
  - 扩展服务云函数，添加专门的跑腿任务查询接口
  - 完善跑腿代办页面，支持分类筛选、价格排序、截止时间显示
  - 添加任务状态管理和接单功能
  - 优化任务列表展示和交互体验

- **消息通知系统**：
  - 新增通知云函数，支持通知创建、查询、标记已读等功能
  - 创建通知页面，支持通知列表展示、操作管理
  - 在个人中心添加通知入口和未读数量显示
  - 支持多种通知类型（任务接单、订单状态、评价等）

- **规格文档**：
  - 新增 `specs/review-system/*` - 评价系统需求文档
  - 新增 `specs/errand-service/*` - 跑腿代办服务需求文档

### 修复
- 修复评价页面样式兼容性问题
- 优化跑腿代办页面的加载状态和空状态展示

### 优化 / 其他
- 完善页面配置与交互文案
- 优化云函数错误处理和参数验证
- 改进用户体验和界面设计

## v0.1.0 (2025-08-10)

### 新增
- admin-review：新增 `modal` 组件，用于审核操作确认与信息提示
- 云函数：新增 `oa-oauth`（`cloudfunctions/oa-oauth`）
- 规格文档：新增 `specs/oa-oauth/*` 与 `specs/account-and-phone-binding/*`
- 功能模块：邻居互助（初版）

### 修复
- 修复小程序运行环境下可选链兼容性问题

### 优化 / 其他
- 完善页面配置与交互文案

### 相关提交
- a622a22 feat(admin-review): 新增 modal 组件；修复可选链兼容性；完善页面配置
- b7fa3aa AI生成邻居互助 